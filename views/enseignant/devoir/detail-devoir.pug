extends ../../commun/master-template.pug 

block content
    //- Start bloc content
    +btn-back("Détail Devoir", "/enseignant/devoir/" + devoir._idEspaceCours )
    div.row
        div.col.s10.offset-s1     
            h2.no-margin #{devoir._nom} 
            div.row.no-margin
                div.col.s12
                    ul.entries 
                        li Visible: #{devoir._visible ? "Oui" : "Non"} 
                        li Description: #{devoir._description} 
                        li Note Maximale: #{devoir._noteMaximale} 
                        li Date début: #{devoir._dateDebut}
                        li Date fin: #{devoir._dateFin}

            h3 Remises des étudiants
            div.row
                div.col.s12
                    table.bordered.highlight
                        thead 
                            tr  
                                - var baseURL = "/enseignant/devoir/detail/" + devoir._idEspaceCours + "/" + devoir._id 
                                th.data-field 
                                    - var valueOrdreEtudiant = currentOrdre == 1 ? 2 : 1 
                                    a.sort-header.with-icon(href=baseURL + "?o=" +  valueOrdreEtudiant) Étudiant
                                        if currentOrdre == 1 || currentOrdre == 2
                                            i.material-icons #{currentOrdre == 1 ? "arrow_drop_up" : "arrow_drop_down"} 
                                th.data-field Code permanent 
                                th.data-field Etat
                                th.data-field Date de remise
                                th.data-field Date de correction
                                th.data-field
                                    - var valueOrdreNote = currentOrdre == 3 ? 4 : 3 
                                    a.sort-header.with-icon(href=baseURL + "?o=" + valueOrdreNote) Note 
                                        if currentOrdre == 3 || currentOrdre == 4
                                            i.material-icons #{currentOrdre == 3 ? "arrow_drop_up" : "arrow_drop_down"} 
                        tbody 
                            each remise in devoir._remises        
                                tr 
                                    td #{remise._etudiant._nom}, #{remise._etudiant._prenom} 
                                    td #{remise._etudiant._code_permanent}
                                    td #{remise._etat}
                                    td #{remise._dateRemise || "-"}
                                    td #{remise._dateCorrection || "-"}
                                    td #{remise._note || "-"} / #{devoir._noteMaximale} 

            div.section
                div.row
                    div.col.s12
                        a(class="waves-effect waves-light btn red right btn-delete-devoir" href="javascript:void(0)" 
                            data-id-devoir=devoir._id
                            data-nom=devoir._nom
                            data-id-espace-cours=devoir._idEspaceCours) Supprimer 
    //- End bloc content

block more-script
    script(type="text/javascript" src="/lib/enseignant/devoir/devoir.js")