<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="389px" preserveAspectRatio="none" style="width:1116px;height:389px;background:#FFFFFF;" version="1.1" viewBox="0 0 1116 389" width="1116px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="Verdana" font-size="18" lengthAdjust="spacing" textLength="185" x="465.25" y="28.708">RDCU pour securite</text><rect fill="#FFFFFF" height="61.3984" style="stroke:#000000;stroke-width:2.0;" width="558.5" x="139" y="234.1797"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="200" x2="200" y1="71.25" y2="382.8438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="420.5" x2="420.5" y1="71.25" y2="382.8438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="604.5" x2="604.5" y1="71.25" y2="382.8438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="772.5" x2="772.5" y1="71.25" y2="382.8438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1064.5" x2="1064.5" y1="71.25" y2="382.8438"/><rect fill="#FEFECE" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="102" x="149" y="39.9531"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="88" x="156" y="59.9482">:SgaRouteur</text><rect fill="#FEFECE" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="139" x="351.5" y="39.9531"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="125" x="358.5" y="59.9482">:Auth.Middleware</text><rect fill="#FEFECE" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="165" x="522.5" y="39.9531"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="151" x="529.5" y="59.9482">:AuthorizationHelper</text><rect fill="#FEFECE" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="151" x="697.5" y="39.9531"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="137" x="704.5" y="59.9482">:GestionnaireCours</text><rect fill="#FEFECE" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="91" x="1019.5" y="39.9531"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="77" x="1026.5" y="59.9482">:Universite</text><polygon fill="#A80036" points="409,139.2148,419,143.2148,409,147.2148" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="200" x2="415" y1="143.2148" y2="143.2148"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="197" x="207" y="138.1489">authMiddleware(req, res, next)</text><path d="M5,86.25 L5,186.25 L195,186.25 L195,96.25 L185,86.25 L5,86.25 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><path d="M185,86.25 L185,96.25 L195,96.25 L185,86.25 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="85" x="11" y="103.3169">Selon expert.</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="169" x="11" y="118.4497">À l'initialisation du routeur,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="163" x="11" y="133.5825">il est défini que le routeur</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="146" x="11" y="148.7153">utilise authMiddleware.</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="129" x="11" y="163.8481">Il fait donc cet appel</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="153" x="11" y="178.981">avant chaque opération</text><polygon fill="#A80036" points="593,212.1797,603,216.1797,593,220.1797" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="421" x2="599" y1="216.1797" y2="216.1797"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="160" x="428" y="211.1138">logged = isLoggedIn(req)</text><path d="M310,197.0469 L310,222.0469 L416,222.0469 L416,207.0469 L406,197.0469 L310,197.0469 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><path d="M406,197.0469 L406,207.0469 L416,207.0469 L406,197.0469 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="85" x="316" y="214.1138">Selon expert.</text><path d="M139,234.1797 L205,234.1797 L205,241.1797 L195,251.1797 L139,251.1797 L139,234.1797 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="61.3984" style="stroke:#000000;stroke-width:2.0;" width="558.5" x="139" y="234.1797"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="154" y="247.2466">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="61" x="220" y="246.3901">[!logged]</text><polygon fill="#A80036" points="211,283.5781,201,287.5781,211,291.5781" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="205" x2="604" y1="287.5781" y2="287.5781"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="103" x="217" y="267.3794">&lt;&lt;exception&gt;&gt;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="126" x="217" y="282.5122">UnauthorizedError()</text><polygon fill="#A80036" points="761,322.7109,771,326.7109,761,330.7109" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="200" x2="767" y1="326.7109" y2="326.7109"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="272" x="207" y="321.645">recupererTousEspaceCours(req, res, next)</text><path d="M89,307.5781 L89,332.5781 L195,332.5781 L195,317.5781 L185,307.5781 L89,307.5781 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><path d="M185,307.5781 L185,317.5781 L195,317.5781 L185,307.5781 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="85" x="95" y="324.645">Selon expert.</text><polygon fill="#A80036" points="1053,357.8438,1063,361.8438,1053,365.8438" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="773" x2="1059" y1="361.8438" y2="361.8438"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="268" x="780" y="356.7778">recupererTousEspaceCours(idEnseignant)</text><path d="M662,342.7109 L662,367.7109 L768,367.7109 L768,352.7109 L758,342.7109 L662,342.7109 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><path d="M758,342.7109 L758,352.7109 L768,352.7109 L758,342.7109 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="85" x="668" y="359.7778">Selon expert.</text><!--MD5=[95abf199a6c1945bff4650f2f4889f92]
@startuml
skinparam style strictuml
skinparam defaultfontname Verdana
title RDCU pour securite
participant ":SgaRouteur" as routeur
participant ":Auth.Middleware" as authentification
participant ":AuthorizationHelper" as helper
participant ":GestionnaireCours" as gestionnaire
participant ":Universite" as universite

routeur -> authentification : authMiddleware(req, res, next)
note left : Selon expert.\nÀ l'initialisation du routeur,\nil est défini que le routeur\nutilise authMiddleware.\nIl fait donc cet appel\navant chaque opération
authentification -> helper : logged = isLoggedIn(req)
note left : Selon expert.
alt !logged
helper - -> routeur : <<exception>>\nUnauthorizedError()
end
routeur -> gestionnaire : recupererTousEspaceCours(req, res, next)
note left : Selon expert.
gestionnaire -> universite : recupererTousEspaceCours(idEnseignant)
note left : Selon expert.
@enduml

PlantUML version 1.2021.9beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>