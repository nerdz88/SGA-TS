<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1062px" preserveAspectRatio="none" style="width:2244px;height:1062px;background:#FFFFFF;" version="1.1" viewBox="0 0 2244 1062" width="2244px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="Verdana" font-size="18" lengthAdjust="spacing" textLength="245" x="1001.75" y="28.708">RDCU pour corrigerDevoir</text><rect fill="#FFFFFF" height="293.4609" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1077" y="734.3047"/><rect fill="#FFFFFF" height="144.6641" style="stroke:#000000;stroke-width:2.0;" width="1473" x="688" y="553.5078"/><rect fill="#FFFFFF" height="132.7969" style="stroke:#000000;stroke-width:2.0;" width="1459.5" x="779" y="789.4375"/><rect fill="#FFFFFF" height="102.5313" style="stroke:#000000;stroke-width:2.0;" width="1161" x="814" y="936.2344"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="279" x2="279" y1="71.25" y2="1055.7656"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="765.5" x2="765.5" y1="71.25" y2="1055.7656"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1082" x2="1082" y1="71.25" y2="1055.7656"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1743" x2="1743" y1="71.25" y2="1055.7656"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1884" x2="1884" y1="71.25" y2="1055.7656"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2063" x2="2063" y1="605.7734" y2="1055.7656"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2204.5" x2="2204.5" y1="71.25" y2="1055.7656"/><rect fill="#FEFECE" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="158" x="200" y="39.9531"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="144" x="207" y="59.9482">:GestionnaireDevoir</text><rect fill="#FEFECE" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="129" x="701.5" y="39.9531"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="115" x="708.5" y="59.9482">remise : Remise</text><rect fill="#FEFECE" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="160" x="1002" y="39.9531"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="146" x="1009" y="59.9482">:ProxyServiceHelper</text><rect fill="#FEFECE" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="102" x="1692" y="39.9531"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="88" x="1699" y="59.9482">:SGBService</text><rect fill="#FEFECE" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="161" x="1804" y="39.9531"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="147" x="1811" y="59.9482">:LocalStorageHelper</text><rect fill="#FEFECE" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="47" x="2181.5" y="39.9531"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="33" x="2188.5" y="59.9482">:Sgb</text><rect fill="#FFFFFF" height="293.4609" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1077" y="734.3047"/><polygon fill="#A80036" points="267,116.5156,277,120.5156,267,124.5156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="0" x2="273" y1="120.5156" y2="120.5156"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="255" x="7" y="100.3169">corrigerDevoir(idEspaceCours, idDevoir,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="250" x="7" y="115.4497">idEtudiant, note, pathFichierCorrection)</text><path d="M284,86.25 L284,126.25 L437,126.25 L437,96.25 L427,86.25 L284,86.25 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><path d="M427,86.25 L427,96.25 L437,96.25 L427,86.25 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="108" x="290" y="103.3169">Selon contrôleur,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="132" x="290" y="118.4497">contôleur de session</text><line style="stroke:#A80036;stroke-width:1.0;" x1="279" x2="321" y1="164.2813" y2="164.2813"/><line style="stroke:#A80036;stroke-width:1.0;" x1="321" x2="321" y1="164.2813" y2="177.2813"/><line style="stroke:#A80036;stroke-width:1.0;" x1="280" x2="321" y1="177.2813" y2="177.2813"/><polygon fill="#A80036" points="290,173.2813,280,177.2813,290,181.2813" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="473" x="286" y="159.2153">remise = recupererUnDevoirEtudiant(idEspaceCours, idDevoir, idEtudiant)</text><path d="M29,136.5156 L29,191.5156 L274,191.5156 L274,146.5156 L264,136.5156 L29,136.5156 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><path d="M264,136.5156 L264,146.5156 L274,146.5156 L264,136.5156 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="224" x="35" y="153.5825">Selon expert, operation représenté</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="208" x="35" y="168.7153">dans un des RDCU précédent du</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="144" x="35" y="183.8481">même cas d'utilisation</text><polygon fill="#A80036" points="754,224.6133,764,228.6133,754,232.6133" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="279" x2="760" y1="228.6133" y2="228.6133"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="274" x="286" y="223.5474">corrigerDevoir(note, pathFichierCorrection)</text><path d="M52,201.9141 L52,241.9141 L274,241.9141 L274,211.9141 L264,201.9141 L52,201.9141 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><path d="M264,201.9141 L264,211.9141 L274,211.9141 L264,201.9141 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="197" x="58" y="218.981">Selon expert, l'oppération veut</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="201" x="58" y="234.1138">modifier les attributs de remise</text><line style="stroke:#A80036;stroke-width:1.0;" x1="766" x2="808" y1="268.3125" y2="268.3125"/><line style="stroke:#A80036;stroke-width:1.0;" x1="808" x2="808" y1="268.3125" y2="281.3125"/><line style="stroke:#A80036;stroke-width:1.0;" x1="767" x2="808" y1="281.3125" y2="281.3125"/><polygon fill="#A80036" points="777,277.3125,767,281.3125,777,285.3125" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="89" x="773" y="263.2466">setNote(note)</text><path d="M659,255.6797 L659,280.6797 L761,280.6797 L761,265.6797 L751,255.6797 L659,255.6797 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><path d="M751,255.6797 L751,265.6797 L761,265.6797 L751,255.6797 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="81" x="665" y="272.7466">Selon expert</text><line style="stroke:#A80036;stroke-width:1.0;" x1="766" x2="808" y1="310.4453" y2="310.4453"/><line style="stroke:#A80036;stroke-width:1.0;" x1="808" x2="808" y1="310.4453" y2="323.4453"/><line style="stroke:#A80036;stroke-width:1.0;" x1="767" x2="808" y1="323.4453" y2="323.4453"/><polygon fill="#A80036" points="777,319.4453,767,323.4453,777,327.4453" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="302" x="773" y="305.3794">setPathFichierCorrection(pathFichierCorrection)</text><path d="M659,297.8125 L659,322.8125 L761,322.8125 L761,307.8125 L751,297.8125 L659,297.8125 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><path d="M751,297.8125 L751,307.8125 L761,307.8125 L751,297.8125 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="81" x="665" y="314.8794">Selon expert</text><line style="stroke:#A80036;stroke-width:1.0;" x1="766" x2="808" y1="352.5781" y2="352.5781"/><line style="stroke:#A80036;stroke-width:1.0;" x1="808" x2="808" y1="352.5781" y2="365.5781"/><line style="stroke:#A80036;stroke-width:1.0;" x1="767" x2="808" y1="365.5781" y2="365.5781"/><polygon fill="#A80036" points="777,361.5781,767,365.5781,777,369.5781" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="136" x="773" y="347.5122">setdate(currentDate)</text><path d="M659,339.9453 L659,364.9453 L761,364.9453 L761,349.9453 L751,339.9453 L659,339.9453 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><path d="M751,339.9453 L751,349.9453 L761,349.9453 L751,339.9453 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="81" x="665" y="357.0122">Selon expert</text><line style="stroke:#A80036;stroke-width:1.0;" x1="766" x2="808" y1="394.7109" y2="394.7109"/><line style="stroke:#A80036;stroke-width:1.0;" x1="808" x2="808" y1="394.7109" y2="407.7109"/><line style="stroke:#A80036;stroke-width:1.0;" x1="767" x2="808" y1="407.7109" y2="407.7109"/><polygon fill="#A80036" points="777,403.7109,767,407.7109,777,411.7109" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="152" x="773" y="389.645">setEtat("RemisCorrige")</text><path d="M659,382.0781 L659,407.0781 L761,407.0781 L761,392.0781 L751,382.0781 L659,382.0781 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><path d="M751,382.0781 L751,392.0781 L761,392.0781 L751,382.0781 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="81" x="665" y="399.145">Selon expert</text><polygon fill="#A80036" points="1070,443.4102,1080,447.4102,1070,451.4102" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="279" x2="1076" y1="447.4102" y2="447.4102"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="515" x="286" y="442.3442">ajouterNoteEtudiantService(idEspaceCours, idEtudiant, typeDevoir, typeId, note)</text><path d="M22,420.7109 L22,460.7109 L274,460.7109 L274,430.7109 L264,420.7109 L22,420.7109 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><path d="M264,420.7109 L264,430.7109 L274,430.7109 L264,420.7109 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="231" x="28" y="437.7778">Selon exert, ProxyServiceHelper fait</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="219" x="28" y="452.9106">la gestion d'un SGB non disponible</text><polygon fill="#A80036" points="1731,508.8086,1741,512.8086,1731,516.8086" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1082" x2="1737" y1="512.8086" y2="512.8086"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="538" x="1089" y="507.7427">reponse = ajouterNoteEtudiant(idEspaceCours, idEtudiant, typeDevoir, typeId, note)</text><path d="M794,470.9766 L794,540.9766 L1077,540.9766 L1077,480.9766 L1067,470.9766 L794,470.9766 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1067,470.9766 L1067,480.9766 L1077,480.9766 L1067,470.9766 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="222" x="800" y="488.0435">Selon indirection, évite le couplage</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="262" x="800" y="503.1763">entre GestionnaireDevoir et le SGB. Tous</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="183" x="800" y="518.3091">les appels vers SGB sont fait</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="98" x="800" y="533.4419">par SGBService</text><path d="M688,553.5078 L754,553.5078 L754,560.5078 L744,570.5078 L688,570.5078 L688,553.5078 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="144.6641" style="stroke:#000000;stroke-width:2.0;" width="1473" x="688" y="553.5078"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="703" y="566.5747">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="90" x="769" y="565.7183">[!reponse.ok]</text><polygon fill="#A80036" points="1963,587.7734,1973,591.7734,1963,595.7734" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1082" x2="1969" y1="591.7734" y2="591.7734"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="512" x="1089" y="586.7075">noteDevoirJSON = create(idEspaceCours, typeQuestion, typeId, note, studentId)</text><rect fill="#FEFECE" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="176" x="1975" y="575.125"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="162" x="1982" y="595.1201">noteDevoirJSON : JSON</text><path d="M830,575.6406 L830,615.6406 L1077,615.6406 L1077,585.6406 L1067,575.6406 L830,575.6406 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1067,575.6406 L1067,585.6406 L1077,585.6406 L1067,575.6406 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="226" x="836" y="592.7075">Selon créateur, ProxyServiceHelper</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="223" x="836" y="607.8403">utilise étroitement noteDevoirJSON</text><polygon fill="#A80036" points="1872.5,641.0391,1882.5,645.0391,1872.5,649.0391" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1082" x2="1878.5" y1="645.0391" y2="645.0391"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="174" x="1089" y="639.9731">pushData(noteDevoirJSON)</text><path d="M789,625.9063 L789,650.9063 L1077,650.9063 L1077,635.9063 L1067,625.9063 L789,625.9063 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1067,625.9063 L1067,635.9063 L1077,635.9063 L1067,625.9063 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="267" x="795" y="642.9731">Selon expert, crée un stockage persistent</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1082" x2="1124" y1="677.1719" y2="677.1719"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1124" x2="1124" y1="677.1719" y2="690.1719"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1083" x2="1124" y1="690.1719" y2="690.1719"/><polygon fill="#A80036" points="1093,686.1719,1083,690.1719,1093,694.1719" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="164" x="1089" y="672.106">scheduleSGBFallbackJob()</text><path d="M698,664.5391 L698,689.5391 L1077,689.5391 L1077,674.5391 L1067,664.5391 L698,664.5391 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1067,664.5391 L1067,674.5391 L1077,674.5391 L1067,664.5391 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="358" x="704" y="681.606">initialise l'appel a chaque 5 minutes de SGBFallbackJob()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1082" x2="1129" y1="721.3047" y2="721.3047"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1129" x2="1129" y1="721.3047" y2="734.3047"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1088" x2="1129" y1="734.3047" y2="734.3047"/><polygon fill="#A80036" points="1098,730.3047,1088,734.3047,1098,738.3047" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="107" x="1094" y="716.2388">SGBFallbackJob()</text><path d="M805,713.6719 L805,738.6719 L1072,738.6719 L1072,723.6719 L1062,713.6719 L805,713.6719 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1062,713.6719 L1062,723.6719 L1072,723.6719 L1062,713.6719 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="246" x="811" y="730.7388">fonction appelée a chaque 5 minuutes</text><polygon fill="#A80036" points="1872.5,767.4375,1882.5,771.4375,1872.5,775.4375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1087" x2="1878.5" y1="771.4375" y2="771.4375"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="124" x="1094" y="766.3716">data = getAllData()</text><path d="M783,752.3047 L783,777.3047 L1072,777.3047 L1072,762.3047 L1062,752.3047 L783,752.3047 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1062,752.3047 L1062,762.3047 L1072,762.3047 L1062,752.3047 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="268" x="789" y="769.3716">selon expert, data est un tableau de JSON</text><path d="M779,789.4375 L857,789.4375 L857,796.4375 L847,806.4375 L779,806.4375 L779,789.4375 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="132.7969" style="stroke:#000000;stroke-width:2.0;" width="1459.5" x="779" y="789.4375"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="794" y="802.5044">loop</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="88" x="872" y="801.6479">[data.length]</text><polygon fill="#A80036" points="1731,849.4023,1741,853.4023,1731,857.4023" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1087" x2="1737" y1="853.4023" y2="853.4023"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="632" x="1094" y="848.3364">reponseTentativeAjout = ajouterNoteEtudiant(idEspaceCours, idEtudiant, typeDevoir, typeId, note)</text><path d="M789,811.5703 L789,881.5703 L1072,881.5703 L1072,821.5703 L1062,811.5703 L789,811.5703 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1062,811.5703 L1062,821.5703 L1072,821.5703 L1062,811.5703 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="222" x="795" y="828.6372">Selon indirection, évite le couplage</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="262" x="795" y="843.77">entre GestionnaireDevoir et le SGB. Tous</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="183" x="795" y="858.9028">les appels vers SGB sont fait</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="98" x="795" y="874.0356">par SGBService</text><polygon fill="#A80036" points="2193,907.2344,2203,911.2344,2193,915.2344" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1743" x2="2199" y1="911.2344" y2="911.2344"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="438" x="1750" y="906.1685">reponse = post(idEspaceCours, idEtudiant, typeDevoir, typeId, note)</text><path d="M1632,892.1016 L1632,917.1016 L1738,917.1016 L1738,902.1016 L1728,892.1016 L1632,892.1016 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1728,892.1016 L1728,902.1016 L1738,902.1016 L1728,892.1016 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="85" x="1638" y="909.1685">Selon expert.</text><path d="M814,936.2344 L880,936.2344 L880,943.2344 L870,953.2344 L814,953.2344 L814,936.2344 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="102.5313" style="stroke:#000000;stroke-width:2.0;" width="1161" x="814" y="936.2344"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="829" y="949.3013">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="187" x="895" y="948.4448">[reponseTentativeAjout.ok]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1087" x2="1129" y1="978.5664" y2="978.5664"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1129" x2="1129" y1="978.5664" y2="991.5664"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1088" x2="1129" y1="991.5664" y2="991.5664"/><polygon fill="#A80036" points="1098,987.5664,1088,991.5664,1098,995.5664" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="193" x="1094" y="973.5005">stopScheduleSGBFallbackJob()</text><path d="M824,958.3672 L824,998.3672 L1072,998.3672 L1072,968.3672 L1062,958.3672 L824,958.3672 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1062,958.3672 L1062,968.3672 L1072,968.3672 L1062,958.3672 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="129" x="830" y="975.4341">si la tentative réussi</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="227" x="830" y="990.5669">arrête de tenter de pousser au SGB</text><polygon fill="#A80036" points="1872.5,1023.7656,1882.5,1027.7656,1872.5,1031.7656" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1082" x2="1878.5" y1="1027.7656" y2="1027.7656"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="72" x="1089" y="1022.6997">clearData()</text><path d="M971,1008.6328 L971,1033.6328 L1072,1033.6328 L1072,1018.6328 L1062,1008.6328 L971,1008.6328 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1062,1008.6328 L1062,1018.6328 L1072,1018.6328 L1062,1008.6328 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="80" x="977" y="1025.6997">selon expert</text><!--MD5=[e9db86a76a7c45de16c983d41cd8cc8d]
@startuml
skinparam style strictuml
skinparam defaultfontname Verdana
title RDCU pour corrigerDevoir
participant ":GestionnaireDevoir" as gestionnaireDevoir
participant "remise : Remise" as remise
participant ":ProxyServiceHelper" as proxy
participant ":SGBService" as service
participant ":LocalStorageHelper" as storage
participant "noteDevoirJSON : JSON" as json
participant ":Sgb" as sgb

-> gestionnaireDevoir : corrigerDevoir(idEspaceCours, idDevoir,\nidEtudiant, note, pathFichierCorrection)
note left : Selon contrôleur,\ncontôleur de session
gestionnaireDevoir -> gestionnaireDevoir : remise = recupererUnDevoirEtudiant(idEspaceCours, idDevoir, idEtudiant)
note left : Selon expert, operation représenté\ndans un des RDCU précédent du\nmême cas d'utilisation
gestionnaireDevoir -> remise : corrigerDevoir(note, pathFichierCorrection)
note left : Selon expert, l'oppération veut\nmodifier les attributs de remise
remise -> remise : setNote(note)
note left : Selon expert
remise -> remise : setPathFichierCorrection(pathFichierCorrection)
note left : Selon expert
remise -> remise : setdate(currentDate)
note left : Selon expert
remise -> remise : setEtat("RemisCorrige")
note left : Selon expert
gestionnaireDevoir -> proxy : ajouterNoteEtudiantService(idEspaceCours, idEtudiant, typeDevoir, typeId, note)
note left : Selon exert, ProxyServiceHelper fait\nla gestion d'un SGB non disponible
proxy -> service : reponse = ajouterNoteEtudiant(idEspaceCours, idEtudiant, typeDevoir, typeId, note)
note left : Selon indirection, évite le couplage\nentre GestionnaireDevoir et le SGB. Tous\nles appels vers SGB sont fait\npar SGBService
alt !reponse.ok
proxy - -> json** : noteDevoirJSON = create(idEspaceCours, typeQuestion, typeId, note, studentId)
note left : Selon créateur, ProxyServiceHelper\nutilise étroitement noteDevoirJSON
proxy -> storage : pushData(noteDevoirJSON)
note left : Selon expert, crée un stockage persistent
proxy -> proxy : scheduleSGBFallbackJob()
note left : initialise l'appel a chaque 5 minutes de SGBFallbackJob()
end
proxy -> proxy ++: SGBFallbackJob()
note left : fonction appelée a chaque 5 minuutes
proxy -> storage : data = getAllData()
note left : selon expert, data est un tableau de JSON
loop data.length
proxy -> service : reponseTentativeAjout = ajouterNoteEtudiant(idEspaceCours, idEtudiant, typeDevoir, typeId, note)
note left : Selon indirection, évite le couplage\nentre GestionnaireDevoir et le SGB. Tous\nles appels vers SGB sont fait\npar SGBService
service -> sgb : reponse = post(idEspaceCours, idEtudiant, typeDevoir, typeId, note)
note left : Selon expert.
end
alt reponseTentativeAjout.ok
proxy -> proxy : stopScheduleSGBFallbackJob()
note left : si la tentative réussi\narrête de tenter de pousser au SGB
proxy -> storage - -: clearData()
note left : selon expert
end
@enduml

PlantUML version 1.2021.9beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>